minimum-vagga: v0.7.0
containers:
  pip-freeze:
    setup:
    - !Alpine v3.4
    - !Py3Install
      - pip
      - 'Django >=1.8, <2.0'
      - 'gunicorn >=19.6.0, <20.0'
      - 'whitenoise >=3.2.3, <4.0'
      - 'django-environ >=0.4.1, <1.0'
    - !Sh |
        echo "-r base-requirements.txt" > requirements.txt
        pip freeze >> requirements.txt
  django:
    setup:
    - !Alpine v3.4
    - !PipConfig
      dependencies: true
    - !Py3Requirements requirements.txt
commands:
  run: !Command
    description: Start server
    container: django
    run: python3 manage.py runserver
  manage.py: !Command
    description: Shortcut to manage.py
    container: django
    run: [python3, manage.py]
